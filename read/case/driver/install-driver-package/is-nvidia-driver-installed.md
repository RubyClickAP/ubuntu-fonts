---
layout: page
title: 如何確認「Nvidia驅動程式」是否已經安裝
description: >
  Ubuntu環境，如何確認「Nvidia驅動程式」是否已經安裝。
parent:
  title: 透過安裝驅動程式套件的方式，來安裝驅動程式
  url: /read/case/driver/install-driver-package
---


## 原始討論

* [回覆: linux mint 安裝顯示卡問題](https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=353076#forumpost353076)
* [回覆: linux mint 安裝顯示卡問題](https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=353082#forumpost353082)
* [回覆: [分享]ubuntu 安裝 nvidia 驅動心得](https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=331892#forumpost331892)


## 方法一

若是使用「安裝Nvidia驅動程式套件」的方式，可以確認套件是否已經安裝。

可以執行

``` sh
$ dpkg -l 'nvidia*'
```

顯示

```
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                     Version           Architecture      Description
+++-========================-=================-=================-======================================================
ii  nvidia-361               361.42-0ubuntu2   amd64             NVIDIA binary driver - version 361.42
ii  nvidia-361-updates       361.42-0ubuntu2   amd64             Transitional package for nvidia-361
un  nvidia-common            <none>            <none>            (no description available)
un  nvidia-driver-binary     <none>            <none>            (no description available)
un  nvidia-legacy-340xx-vdpa <none>            <none>            (no description available)
un  nvidia-libopencl1-361    <none>            <none>            (no description available)
un  nvidia-libopencl1-dev    <none>            <none>            (no description available)
un  nvidia-opencl-icd        <none>            <none>            (no description available)
ii  nvidia-opencl-icd-361    361.42-0ubuntu2   amd64             NVIDIA OpenCL ICD
un  nvidia-persistenced      <none>            <none>            (no description available)
ii  nvidia-prime             0.8.2             amd64             Tools to enable NVIDIA's Prime
ii  nvidia-settings          361.42-0ubuntu1   amd64             Tool for configuring the NVIDIA graphics driver
un  nvidia-settings-binary   <none>            <none>            (no description available)
un  nvidia-vdpau-driver      <none>            <none>            (no description available)
```

或是執行

```
$ dpkg --get-selections | grep nvidia
```

顯示

```
nvidia-361					install
nvidia-361-updates				install
nvidia-opencl-icd-361				install
nvidia-prime					install
nvidia-settings					install
```

如何查詢套件是否已經安裝在系統上，可以閱讀「[如何知道某個套件是否已經安裝](http://samwhelp.github.io/book-ubuntu-basic-skill/book/content/package/how-to-figure-out-package-installed.html)」。

「Nvidia驅動程式套件」的概念，可以閱讀『[如何找出「Nvidia驅動程式套件」](/book-ubuntu-qna/read/case/driver/install-driver-package/nvidia-driver-package.html)』這篇。


## 方法二


執行下面指令，可以知道 「nvidia 的 kernel 模組(驅動程式)」 是否有載入

``` sh
$ lsmod | grep nvidia
```

顯示

```
nvidia_uvm            696320  0
nvidia_modeset        745472  2
nvidia              10076160  88 nvidia_modeset,nvidia_uvm
drm                   360448  9 i915,drm_kms_helper,nvidia
```

相關的概念，請閱讀「鳥哥的私房菜 / 第十九章、開機流程、模組管理與 Loader / [19.2.2 核心模組的觀察： lsmod, modinfo](http://linux.vbird.org/linux_basic/0510osloader.php#kernel_look)」。


進一步可以查詢模組相關資訊

執行

``` sh
$ modinfo nvidia_361
```

顯示

```
filename:       /lib/modules/4.4.0-24-generic/updates/dkms/nvidia_361.ko
alias:          char-major-195-*
version:        361.42
supported:      external
license:        NVIDIA
srcversion:     47D1C898C46D058800C3250
alias:          pci:v000010DEd00000E00sv*sd*bc04sc80i00*
alias:          pci:v000010DEd*sv*sd*bc03sc02i00*
alias:          pci:v000010DEd*sv*sd*bc03sc00i00*
depends:        drm
vermagic:       4.4.0-24-generic SMP mod_unload modversions
parm:           NVreg_Mobile:int
parm:           NVreg_ResmanDebugLevel:int
parm:           NVreg_RmLogonRC:int
parm:           NVreg_ModifyDeviceFiles:int
parm:           NVreg_DeviceFileUID:int
parm:           NVreg_DeviceFileGID:int
parm:           NVreg_DeviceFileMode:int
parm:           NVreg_UpdateMemoryTypes:int
parm:           NVreg_InitializeSystemMemoryAllocations:int
parm:           NVreg_UsePageAttributeTable:int
parm:           NVreg_MapRegistersEarly:int
parm:           NVreg_RegisterForACPIEvents:int
parm:           NVreg_CheckPCIConfigSpace:int
parm:           NVreg_EnablePCIeGen3:int
parm:           NVreg_EnableMSI:int
parm:           NVreg_TCEBypassMode:int
parm:           NVreg_MemoryPoolSize:int
parm:           NVreg_RegistryDwords:charp
parm:           NVreg_RmMsg:charp
parm:           NVreg_AssignGpus:charp

```

至於為什麼是「nvidia_361」而不是「nvidia」，

我看到「/lib/nvidia-361/modprobe.conf」這個檔有做「alias」。

執行

``` sh
$ cat /lib/nvidia-361/modprobe.conf
```

顯示

```
# This file was installed by nvidia-361
# Do not edit this file manually

blacklist nouveau
blacklist lbm-nouveau
blacklist nvidia-current
blacklist nvidia-173
blacklist nvidia-96
blacklist nvidia-current-updates
blacklist nvidia-173-updates
blacklist nvidia-96-updates
blacklist nvidia-361-updates
alias nvidia nvidia_361
alias nvidia-uvm nvidia_361-uvm
alias nvidia-modeset nvidia_361-modeset
alias nouveau off
alias lbm-nouveau off
```

可以看到上面有一行「alias nvidia nvidia_361」。

不過整個機制，我還沒研究透徹，先紀錄我目前發現到的。

「/lib/nvidia-361/modprobe.conf」這個檔，我是執行下面的指令查詢到的。

``` sh
$ dpkg -L nvidia-361
```

上面這個指令，就是查詢「[nvidia-361](http://packages.ubuntu.com/xenial/nvidia-361)」這個套件，安裝那些檔案在系統上，顯示的「[file list](http://packages.ubuntu.com/xenial/amd64/nvidia-361/filelist)」，也可以在網頁上找到。

這個用法，可以參考「[如何查詢某個套件安裝在系統上的所有檔案](http://samwhelp.github.io/book-ubuntu-basic-skill/book/content/package/how-to-find-out-list-of-files-installed-by-a-package.html)」這篇。
